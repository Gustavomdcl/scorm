var findAPITries=0;function findAPI(e){for(;null==e.API&&null!=e.parent&&e.parent!=e;){if(7<++findAPITries)return alert("Error finding API -- too deeply nested."),null;e=e.parent}return e.API}function getAPI(){var e=findAPI(window);return null==e&&null!=window.opener&&void 0!==window.opener&&(e=findAPI(window.opener)),null==e&&console.log("SCORM: Unable to find an API adapter"),e}var SCORM_TRUE="true",SCORM_FALSE="false",SCORM_NO_ERROR="0",finishCalled=!1,initialized=!1,API=null;function ScormProcessInitialize(){if(null!=(API=getAPI()))if(API.LMSInitialize("")!=SCORM_FALSE)initialized=!0;else{var e=API.LMSGetLastError(),r=API.LMSGetErrorString(e),n=API.LMSGetDiagnostic(e);alert("Error - Could not initialize communication with the LMS.\n\nYour results may not be recorded.\n\n"+("Number: "+e+"\nDescription: "+r+"\nDiagnostic: "+n))}else console.log("SCORM: ERROR - Could not establish a connection with the LMS.\n\nYour results may not be recorded.")}function ScormProcessFinish(){var e;if(0!=initialized&&1!=finishCalled)if(e=API.LMSFinish(""),finishCalled=!0,e!=SCORM_FALSE);else{var r=API.LMSGetLastError(),n=API.LMSGetErrorString(r),i=API.LMSGetDiagnostic(r);alert("Error - Could not terminate communication with the LMS.\n\nYour results may not be recorded.\n\n"+("Number: "+r+"\nDescription: "+n+"\nDiagnostic: "+i))}}function ScormProcessGetValue(e){var r;if(0!=initialized&&1!=finishCalled){if(""==(r=API.LMSGetValue(e))){var n=API.LMSGetLastError();if(n!=SCORM_NO_ERROR){var i=API.LMSGetErrorString(n),t=API.LMSGetDiagnostic(n);return alert("Error - Could not retrieve a value from the LMS.\n\n"+("Number: "+n+"\nDescription: "+i+"\nDiagnostic: "+t)),""}}return r}}function ScormProcessSetValue(e,r){if(0!=initialized&&1!=finishCalled)if(API.LMSSetValue(e,r)!=SCORM_FALSE);else{var n=API.LMSGetLastError(),i=API.LMSGetErrorString(n),t=API.LMSGetDiagnostic(n);alert("Error - Could not store a value in the LMS.\n\nYour results may not be recorded.\n\n"+("Number: "+n+"\nDescription: "+i+"\nDiagnostic: "+t))}}var startTime=null;function Scorm_Start(){return ScormProcessInitialize(),StartTimer(),"completed"!=ScormProcessGetValue("cmi.core.lesson_status")&&Scorm_Status("incomplete"),{slide:ScormProcessGetValue("cmi.core.lesson_location"),status:ScormProcessGetValue("cmi.core.lesson_status")}}function StartTimer(){startTime=new Date}function StopTimer(){ScormProcessSetValue("cmi.core.session_time",ConvertMilliSecondsToSCORMTime((new Date).getTime()-startTime.getTime(),!1))}function Scorm_Location(e){ScormProcessSetValue("cmi.core.lesson_location",e)}function Scorm_Status(e){ScormProcessSetValue("cmi.core.lesson_status",e)}function Score(e){ScormProcessSetValue("cmi.core.score.raw",e),ScormProcessSetValue("cmi.core.score.min","0"),ScormProcessSetValue("cmi.core.score.max","100")}function Scorm_Finish(){StopTimer(),ScormProcessSetValue("cmi.core.exit",""),ScormProcessFinish()}function ConvertMilliSecondsToSCORMTime(e,r){var n,i,t,o,s;return null!=r&&null!=r||(r=!0),intMinutes=(e-(t=e%1e3)-1e3*(i=(e-t)/1e3%60))/6e4%60,1e4==(n=(e-t-1e3*i-6e4*intMinutes)/36e5)&&(intMinutes=(e-36e5*(n=9999))/6e4,100==intMinutes&&(intMinutes=99),intMinutes=Math.floor(intMinutes),100==(i=(e-36e5*n-6e4*intMinutes)/1e3)&&(i=99),i=Math.floor(i),t=e-36e5*n-6e4*intMinutes-1e3*i),o=Math.floor(t/10),s=ZeroPad(n,4)+":"+ZeroPad(intMinutes,2)+":"+ZeroPad(i,2),r&&(s+="."+o),9999<n&&(s="9999:99:99",r&&(s+=".99")),s}function ZeroPad(e,r){var n,i,t;if(r<(i=(n=new String(e)).length))n=n.substr(0,r);else for(t=i;t<r;t++)n="0"+n;return n}