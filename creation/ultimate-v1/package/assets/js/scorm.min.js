var findAPITries=0;function findAPI(e){for(;null==e.API&&null!=e.parent&&e.parent!=e;){if(7<++findAPITries)return alert("Error finding API -- too deeply nested."),null;e=e.parent}return e.API}function getAPI(){var e=findAPI(window);return null==e&&null!=window.opener&&void 0!==window.opener&&(e=findAPI(window.opener)),null==e&&console.log("SCORM: Unable to find an API adapter"),e}var SCORM_TRUE="true",SCORM_FALSE="false",SCORM_NO_ERROR="0",finishCalled=!1,initialized=!1,API=null;function ScormProcessInitialize(){if(null!=(API=getAPI()))if(API.LMSInitialize("")!=SCORM_FALSE)initialized=!0;else{var e=API.LMSGetLastError(),n=API.LMSGetErrorString(e),i=API.LMSGetDiagnostic(e);alert("Error - Could not initialize communication with the LMS.\n\nYour results may not be recorded.\n\n"+("Number: "+e+"\nDescription: "+n+"\nDiagnostic: "+i))}else console.log("SCORM: ERROR - Could not establish a connection with the LMS.\n\nYour results may not be recorded.")}function ScormProcessFinish(){var e;if(0!=initialized&&1!=finishCalled)if(e=API.LMSFinish(""),finishCalled=!0,e!=SCORM_FALSE);else{var n=API.LMSGetLastError(),i=API.LMSGetErrorString(n),r=API.LMSGetDiagnostic(n);alert("Error - Could not terminate communication with the LMS.\n\nYour results may not be recorded.\n\n"+("Number: "+n+"\nDescription: "+i+"\nDiagnostic: "+r))}}function ScormProcessGetValue(e){var n;if(0!=initialized&&1!=finishCalled){if(""==(n=API.LMSGetValue(e))){var i=API.LMSGetLastError();if(i!=SCORM_NO_ERROR){var r=API.LMSGetErrorString(i),t=API.LMSGetDiagnostic(i);return alert("Error - Could not retrieve a value from the LMS.\n\n"+("Number: "+i+"\nDescription: "+r+"\nDiagnostic: "+t)),""}}return n}}function ScormProcessSetValue(e,n){if(0!=initialized&&1!=finishCalled)if(API.LMSSetValue(e,n)!=SCORM_FALSE);else{var i=API.LMSGetLastError(),r=API.LMSGetErrorString(i),t=API.LMSGetDiagnostic(i);alert("Error - Could not store a value in the LMS.\n\nYour results may not be recorded.\n\n"+("Number: "+i+"\nDescription: "+r+"\nDiagnostic: "+t))}}var startTime=null;function Scorm_Start(){ScormProcessInitialize(),StartTimer(),"completed"!=ScormProcessGetValue("cmi.core.lesson_status")&&Scorm_Status("incomplete")}function StartTimer(){startTime=new Date}function StopTimer(){ScormProcessSetValue("cmi.core.session_time",ConvertMilliSecondsToSCORMTime((new Date).getTime()-startTime.getTime(),!1))}function Scorm_Location(e){ScormProcessSetValue("cmi.core.lesson_location",e)}function Scorm_Status(e){ScormProcessSetValue("cmi.core.lesson_status",e)}function Score(e){ScormProcessSetValue("cmi.core.score.raw",e),ScormProcessSetValue("cmi.core.score.min","0"),ScormProcessSetValue("cmi.core.score.max","100")}function Scorm_Finish(){StopTimer(),ScormProcessSetValue("cmi.core.exit",""),ScormProcessFinish()}function ConvertMilliSecondsToSCORMTime(e,n){var i,r,t,o,s;return null!=n&&null!=n||(n=!0),intMinutes=(e-(t=e%1e3)-1e3*(r=(e-t)/1e3%60))/6e4%60,1e4==(i=(e-t-1e3*r-6e4*intMinutes)/36e5)&&(intMinutes=(e-36e5*(i=9999))/6e4,100==intMinutes&&(intMinutes=99),intMinutes=Math.floor(intMinutes),100==(r=(e-36e5*i-6e4*intMinutes)/1e3)&&(r=99),r=Math.floor(r),t=e-36e5*i-6e4*intMinutes-1e3*r),o=Math.floor(t/10),s=ZeroPad(i,4)+":"+ZeroPad(intMinutes,2)+":"+ZeroPad(r,2),n&&(s+="."+o),9999<i&&(s="9999:99:99",n&&(s+=".99")),s}function ZeroPad(e,n){var i,r,t;if(n<(r=(i=new String(e)).length))i=i.substr(0,n);else for(t=r;t<n;t++)i="0"+i;return i}